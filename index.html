<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="./assets/images/favicon.svg" type="image/svg+xml">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,-25" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./assets/css/style.css">
    
    <!-- Add this in your <head> section -->
<script src="https://cdn.jsdelivr.net/npm/music-metadata-browser@2.5.0/dist/browser.js"></script>
</head>
<body>
    <!-- Main Container -->
    <div class="app-container">
        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Home Page -->
            <section class="page active" id="homePage">
                <!-- Welcome Section -->
       <div class="header-top">
            <h1>Home</h1>                      
        </div>
                <div class="welcome-section">
                    <h1>Welcome Back</h1>
                    <p class="greeting">What do you want to listen to today?</p>
                </div>

                <!-- Featured Artists -->
                <section class="featured-section">
                    <div class="section-header">
                        <h2>Featured Artists</h2>
                        <button class="btn-text">See All</button>
                    </div>
                    <div class="carousel-container" id="featuredArtists">
                        <!-- Loading Skeleton -->
                        <div class="skeleton featured-artist-card" aria-hidden="true">
                            <div class="artist-image-wrapper skeleton"></div>
                            <div class="skeleton" style="height: 20px; width: 80%; margin: 8px auto;"></div>
                            <div class="skeleton" style="height: 16px; width: 60%; margin: 4px auto;"></div>
                        </div>
                    </div>
                </section>

                <!-- Recently Played -->
                <section class="recently-played">
                    <div class="section-header">
                        <h2>Recently Played</h2>
                        <button class="btn-text">Clear</button>
                    </div>
                    <div class="tracks-grid" id="recentlyPlayed">
                        <!-- Will be populated by JS -->
                    </div>
                </section>

                <!-- Top Charts -->
                <section class="top-charts">
                    <div class="section-header">
                        <h2>Top Charts</h2>
                        <button class="btn-text">More</button>
                    </div>
                    <div class="chart-list" id="topCharts">
                        <!-- Loading Skeleton -->
                        <div class="chart-item skeleton" aria-hidden="true">
                            <span class="chart-rank skeleton">1</span>
                            <div class="skeleton" style="width: 60px; height: 60px; border-radius: 4px;"></div>
                            <div class="track-info">
                                <div class="skeleton" style="height: 16px; width: 80%; margin-bottom: 8px;"></div>
                                <div class="skeleton" style="height: 14px; width: 60%;"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Browse Genres -->
                <section class="genres-section">
                    <div class="section-header">
                        <h2>Browse Genres</h2>
                    </div>
                    <div class="genres-grid" id="genresGrid">
                        <!-- Will be populated by JS -->
                    </div>
                </section>

                <!-- Made For You -->
                <section class="for-you">
                    <div class="section-header">
                        <h2>Made For You</h2>
                        <button class="btn-text">Refresh</button>
                    </div>
                    <div class="albums-grid" id="forYouAlbums">
                        <!-- Loading Skeleton -->
                        <div class="album-card skeleton" aria-hidden="true">
                            <div class="album-art skeleton"></div>
                            <div class="album-info">
                                <div class="skeleton" style="height: 16px; width: 80%; margin-bottom: 8px;"></div>
                                <div class="skeleton" style="height: 14px; width: 60%;"></div>
                            </div>
                        </div>
                    </div>
                </section>
            </section>

            <!-- Replace the existing search page section with this enhanced version -->
<section class="page" id="searchPage">
    <div class="header-top">
            <h1>Search</h1>         
        </div>
    <div class="search-header">
        <div class="search-bar">
            <span class="material-symbols-rounded">search</span>
            <input type="text" id="searchInput" placeholder="Search for songs, artists, or albums...">
            <button class="btn-icon" id="searchFilterBtn">
                <span class="material-symbols-rounded">tune</span>
            </button>
        </div>
        
        <!-- Search Filters -->
        <div class="search-filters" id="searchFilters">
            <div class="filter-group">
                <button class="filter-btn active" data-type="all">
                    <span class="material-symbols-rounded">all_inclusive</span>
                    All
                </button>
                <button class="filter-btn" data-type="tracks">
                    <span class="material-symbols-rounded">music_note</span>
                    Songs
                </button>
                <button class="filter-btn" data-type="artists">
                    <span class="material-symbols-rounded">person</span>
                    Artists
                </button>
                <button class="filter-btn" data-type="albums">
                    <span class="material-symbols-rounded">album</span>
                    Albums
                </button>
            </div>
        </div>
    </div>
    
    <!-- Add this after the search-filters div in the search page section -->
<div class="advanced-filters hidden" id="advancedFilters">
    <div class="filter-row">
        <div class="filter-group">
            <label>Sort By</label>
            <select id="sortFilter">
                <option value="relevance">Relevance</option>
                <option value="popularity">Popularity</option>
                <option value="date">Release Date</option>
                <option value="name">Name</option>
            </select>
        </div>
        <div class="filter-group">
            <label>Duration</label>
            <select id="durationFilter">
                <option value="any">Any Length</option>
                <option value="short">Short (< 3 min)</option>
                <option value="medium">Medium (3-6 min)</option>
                <option value="long">Long (> 6 min)</option>
            </select>
        </div>
    </div>
    <div class="filter-row">
        <div class="filter-group">
            <label>Genre</label>
            <select id="genreFilter">
                <option value="all">All Genres</option>
                ${CONFIG.GENRES.map(genre => 
                    `<option value="${genre.name.toLowerCase()}">${genre.name}</option>`
                ).join('')}
            </select>
        </div>
        <div class="filter-group">
            <label>Order</label>
            <select id="orderFilter">
                <option value="desc">Descending</option>
                <option value="asc">Ascending</option>
            </select>
        </div>
    </div>
</div>

    <!-- Quick Genres -->
    <div class="quick-genres">
        <div class="scroll-container">
            <!-- Will be populated by JS -->
        </div>
    </div>

    <!-- Recent Searches -->
    <div class="recent-searches" id="recentSearches">
        <div class="section-header">
            <h3>Recent Searches</h3>
            <button class="btn-text">Clear</button>
        </div>
        <div class="recent-searches-list">
            <!-- Will be populated by JS -->
        </div>
    </div>

    <!-- Search Results -->
    <div class="search-results" id="searchResults">
        <!-- Will be populated by JS -->
    </div>

    <!-- No Results State -->
    <div class="no-results hidden" id="noResults">
        <span class="material-symbols-rounded">search_off</span>
        <h3>No results found</h3>
        <p>Try different keywords or check your spelling</p>
    </div>

    <!-- Initial State -->
    <div class="initial-state" id="initialState">
        <span class="material-symbols-rounded">manage_search</span>
        <h3>Search for music</h3>
        <p>Find your favorite songs, artists, and albums</p>
    </div>
</section>

            <section class="page" id="playlistPage">
    <div class="playlist-header">
        <div class="header-top">
            <h1>Your Playlists</h1>
            <button class="btn-primary" id="createPlaylistBtn">
            </button>                        
        </div>
        <div class="playlist-filters">
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="recent">Recently Played</button>
                <button class="filter-btn" data-filter="favorite">Favorites</button>
                <button class="filter-btn" data-filter="custom">Custom</button>
            </div>
            <div class="sort-dropdown">
                <select id="playlistSort">
                    <option value="recent">Recently Updated</option>
                    <option value="name">Name</option>
                    <option value="tracks">Number of Tracks</option>
                    <option value="created">Date Created</option>
                </select>
            </div>
        </div>
    </div>

    <div class="playlists-grid" id="playlistsGrid">
        <!-- Default Playlists -->
        <div class="playlist-card default-playlist" data-playlist-id="liked">
            <div class="playlist-art">
                <img src="assets/images/liked-songs.jpg" alt="Liked Songs">
                <button class="btn-play">
                    <span class="material-symbols-rounded">play_arrow</span>
                </button>
            </div>
            <div class="playlist-info">
                <h3>Liked Songs</h3>
                <p>0 tracks</p>
            </div>
        </div>

        <div class="playlist-card default-playlist" data-playlist-id="recent">
            <div class="playlist-art">
                <img src="assets/images/recently-played.jpg" alt="Recently Played">
                <button class="btn-play">
                    <span class="material-symbols-rounded">play_arrow</span>
                </button>
            </div>
            <div class="playlist-info">
                <h3>Recently Played</h3>
                <p>0 tracks</p>
            </div>
        </div>

        <!-- User Playlists will be added here -->
    </div>

    <!-- Empty State -->
    <div class="empty-state hidden" id="emptyPlaylists">
        <span class="material-symbols-rounded">playlist_add</span>
        <h3>Create Your First Playlist</h3>
        <p>Start organizing your favorite music</p>
        <button class="btn-primary create-playlist-btn">
            <span class="material-symbols-rounded">add</span>
            Create Playlist
        </button>
    </div>
</section>

            <!-- Account Page -->
            <section class="page" id="accountPage">
                <div class="page-header">
                    <h1>Account</h1>
                </div>
                
            </section>
        </main>
        
        
        <!-- Mini Player -->
<div id="miniPlayer" class="mini-player">
    <!-- Background blur effect -->
    <div class="background-blur"></div>

    <div class="mini-player-content">
        <!-- Mini Player View -->
        <div class="unified-player-view">
            <!-- Track Info Section -->
            <div class="track-section">
                <img id="miniPlayerCover" src="assets/images/default-cover.jpg" alt="Album Cover">
                <div class="track-info">
                    <h4 id="miniPlayerTitle">No track playing</h4>
                    <p id="miniPlayerArtist">-</p>
                </div>
            </div>

            <!-- Playback Controls Section -->
            <div class="controls-section">
                <button id="shuffleBtn" class="btn-icon" title="Shuffle">
                    <span class="material-symbols-rounded">shuffle</span>
                </button>
                <button id="prevBtn" class="btn-icon" title="Previous">
                    <span class="material-symbols-rounded">skip_previous</span>
                </button>
                <button id="playBtn" class="btn-icon play-btn" title="Play/Pause">
                    <span class="material-symbols-rounded">play_arrow</span>
                </button>
                <button id="nextBtn" class="btn-icon" title="Next">
                    <span class="material-symbols-rounded">skip_next</span>
                </button>
                <button id="repeatBtn" class="btn-icon" title="Repeat">
                    <span class="material-symbols-rounded">repeat</span>
                </button>
            </div>

            <!-- Extra Controls Section -->
            <div class="extra-controls">
                <button id="likeBtn" class="btn-icon" title="Like">
                    <span class="material-symbols-rounded">favorite_border</span>
                </button>
                <button id="addToPlaylistBtn" class="btn-icon" title="Add to Playlist">
                    <span class="material-symbols-rounded">playlist_add</span>
                </button>
                <div class="volume-container">
                    <button id="volumeBtn" class="btn-icon" title="Volume">
                        <span class="material-symbols-rounded">volume_up</span>
                    </button>
                    <div class="volume-slider hidden">
                        <input type="range" id="volumeSlider" min="0" max="100" value="100">
                    </div>
                </div>
            </div>
        </div>

        <!-- Expanded Player View -->
        <div class="expanded-view">
            <!-- Expanded Header -->
            <div class="expanded-header">
                <button class="btn-icon collapse-player" title="Collapse Player">
                    <span class="material-symbols-rounded">keyboard_arrow_down</span>
                </button>
                <button class="btn-icon toggle-queue" title="Queue">
                    <span class="material-symbols-rounded">queue_music</span>
                </button>
            </div>

            <!-- Expanded Content -->
            <div class="expanded-content">
                <!-- Cover Art -->
                <div class="cover-art">
                    <img id="expandedPlayerCover" src="assets/images/default-cover.jpg" alt="Album Cover">
                </div>

                <!-- Track Details -->
                <div class="track-details">
                    <h2 id="expandedPlayerTitle">No track playing</h2>
                    <p id="expandedPlayerArtist">-</p>
                </div>

                <!-- Progress Section -->
                <div class="progress-section">
                    <span id="currentTime">0:00</span>
                    <div class="progress-bar">
                        <div id="progressBar" class="progress"></div>
                    </div>
                    <span id="duration">0:00</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Mini Player Progress Bar -->
    <div class="progress-bar mini-progress">
        <div id="miniPlayerProgress" class="progress"></div>
    </div>
</div>

<!-- Queue Panel (Hidden by default) -->
<div id="queuePanel" class="queue-panel hidden">
    <div class="queue-header">
        <h3>Queue</h3>
        <button class="btn-icon close-queue">
            <span class="material-symbols-rounded">close</span>
        </button>
    </div>
    <div class="queue-content">
        <div id="queueList" class="queue-list">
            <!-- Queue items will be dynamically added here -->
        </div>
    </div>
</div>

<!-- Context Menu for Track Actions (Hidden by default) -->
<div id="trackContextMenu" class="context-menu hidden">
    <ul>
        <li data-action="add-to-playlist">
            <span class="material-symbols-rounded">playlist_add</span>
            Add to Playlist
        </li>
        <li data-action="add-to-queue">
            <span class="material-symbols-rounded">queue_music</span>
            Add to Queue
        </li>
        <li data-action="like">
            <span class="material-symbols-rounded">favorite_border</span>
            Like
        </li>
        <li data-action="share">
            <span class="material-symbols-rounded">share</span>
            Share
        </li>
    </ul>
</div>

<!-- Add to Playlist Modal (Hidden by default) -->
<div id="addToPlaylistModal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Add to Playlist</h3>
            <button class="btn-icon close-modal">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="playlist-list">
                <!-- Playlists will be dynamically added here -->
            </div>
            <button class="create-playlist-btn">
                <span class="material-symbols-rounded">add</span>
                Create New Playlist
            </button>
        </div>
    </div>
</div>

<!-- Toast Notification Container -->
<div id="toastContainer" class="toast-container"></div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-page="homePage">
                <span class="material-symbols-rounded">home</span>
                <span class="nav-label">Home</span>
            </button>
            <button class="nav-item" data-page="searchPage">
                <span class="material-symbols-rounded">search</span>
                <span class="nav-label">Search</span>
            </button>
            <button class="nav-item" data-page="playlistPage">
                <span class="material-symbols-rounded">queue_music</span>
                <span class="nav-label">Playlist</span>
            </button>
            <button class="nav-item" data-page="accountPage">
                <span class="material-symbols-rounded">person</span>
                <span class="nav-label">Account</span>
            </button>
        </nav>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner hidden">
        <span class="material-symbols-rounded"></span>
    </div>

    <!-- Scripts -->
    <script src="./assets/js/config.js"></script>
    <script src="./assets/js/api.js"></script>
    
    <script src="./assets/js/app.js"></script>
    <script>
    const currentTime = new Date('2025-03-08 20:49:19');
    const currentUser = 'Firabk12';
    </script>
    <script src="../assets/js/utils/SessionManager.js"></script>    
</body>
</html>
